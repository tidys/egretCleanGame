var AssetAdapter=function(){function e(){}var t=(__define,e),n=t.prototype;return n.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?i(r):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var AVMgr=function(){function e(){}var t=(__define,e);t.prototype;return e.test=function(){var e="PgJ6NThEgme493wrvexghyRA-gzGzoHsz",t="yuLVnbbIvDbh2xXg85iDJHtr";AV.init({appId:e,appKey:t});var n=new AV.Object("Test");n.set("title","Test"),n.set("content","ÿ�ܹ���ʦ���飬��һ����2��"),n.save().then(function(e){egret.log("�ɹ�")},function(e){egret.log("ʧ��")})},e}();egret.registerClass(AVMgr,"AVMgr");var CfgFileMgr=function(){function e(){}var t=(__define,e);t.prototype;return e.getLvCfgDatayId=function(e){var t=Util.formatString(["%04s",e]),n=RES.getRes("lvcfg_json");for(var i in n){var r=n[i],a=r.id;if(a==t.toString())return r}return null},e}();egret.registerClass(CfgFileMgr,"CfgFileMgr");var DCAgentMgr=function(){function e(){}var t=(__define,e);t.prototype;return e.init=function(){var e={appId:"C688D2AE9CAC1B5C3FD241360B74E4BDC"};DCAgent.init(e)},e}();egret.registerClass(DCAgentMgr,"DCAgentMgr");var PlayerData=function(){function e(){}var t=(__define,e);t.prototype;return e.saveLv=function(e){e>=this.data.fightLv&&(this.data.fightLv=e),this.save()},e.initData=function(){var e=egret.localStorage.getItem("gameLocalData");e&&(this.data=JSON.parse(e))},e.save=function(){var e=JSON.stringify(this.data);egret.localStorage.setItem("gameLocalData",e)},e.data={fightLv:"1",gold:0,heart:0},e}();egret.registerClass(PlayerData,"PlayerData");var SceneMgr=function(){function e(){}var t=(__define,e);t.prototype;return e.gotoLogoin=function(){var t=new ResLoading;Director.getInstance().pushScene(t);var n=(new CallBackFunc).handler(e.onLogo,this,[]);t.load(["com","fruit","logoin","mp3"],n)},e.onLogo=function(){var e=new Logoin;Director.getInstance().repleaceScene(e)},e.gotoIndex=function(){var t=new ResLoading;Director.getInstance().pushScene(t);var n=(new CallBackFunc).handler(e.onIndex,this,[]);t.load(["map","index","json"],n)},e.onIndex=function(){var e=new IndexScene;Director.getInstance().repleaceScene(e)},e.gotoGame=function(){var t=new ResLoading;Director.getInstance().pushScene(t);var n=(new CallBackFunc).handler(e.onGame,this,[]);t.load(["cell","fruit","json"],n)},e.onGame=function(){var e=new GameScene;Director.getInstance().repleaceScene(e)},e.rePlayLv=function(){GameData.curScore=0,GameData.curStep=GameData.targetStep,GameData.isOver=!1,GameData.isWin=!1,Director.getInstance().repleaceScene(new GameScene)},e.gotoTest=function(){var t=new ResLoading;Director.getInstance().pushScene(t);var n=(new CallBackFunc).handler(e.onTest,this,[]);t.load(["test"],n)},e.onTest=function(){Director.getInstance().repleaceScene(new Test)},e.gotoChat=function(){Director.getInstance().repleaceScene(new ChatScene)},e}();egret.registerClass(SceneMgr,"SceneMgr");var SoundsMgr=function(){function e(){}var t=(__define,e);t.prototype;return e.playBtn=function(){this.playMusic("button_mp3")},e.clickCell=function(){this.playMusic("dianji_mp3")},e.removeCell=function(e){var t=["efx_combine_1_mp3","efx_combine_2_mp3","efx_combine_3_mp3","efx_combine_4_mp3","efx_combine_5_mp3","efx_combine_6_mp3","efx_combine_7_mp3"];e>=6&&(e=6),this.playMusic(t[e])},e.win=function(){this.playMusic("win_mp3")},e.lose=function(){this.playMusic("lose_mp3")},e.playMusic=function(e){var t=RES.getRes(e.toString());t&&(this.bgSoundChannel=t.play(0,1))},e.bgSoundChannel=null,e}();egret.registerClass(SoundsMgr,"SoundsMgr");var GameAddOneCfg=function(){function e(){}var t=(__define,e);t.prototype;return e.colorArray=[4286945,65535,65280,8322816,16776960,16750866,16736512,8399402,10494192],e.Grid={row:6,column:6},e}();egret.registerClass(GameAddOneCfg,"GameAddOneCfg");var GameAddOneEvent=function(e){function t(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),e.call(this,t,n,i)}__extends(t,e);var n=(__define,t);n.prototype;return t.GameOver="GameOver",t.CellAddOne="CellAddOne",t.CellRemove="CellRemove",t.CellAddPos="CellAddPos",t.CellMoveOver="CellMoveOver",t}(egret.Event);egret.registerClass(GameAddOneEvent,"GameAddOneEvent");var GameAddOneScene=function(e){function t(){e.call(this),GridMgr.init(),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onAddStage=function(){this.createStage(),this.createAllCell()},i.createStage=function(){var e=new egret.Sprite;e.graphics.beginFill(8947848,1),e.graphics.drawRect(0,0,Display.winSize.width,Display.winSize.height),e.graphics.endFill(),this.addChild(e)},i.createAllCell=function(){this.cellPanel=new egret.Sprite,this.cellPanel.graphics.beginFill(1002080,1);var e=6*Grid.width+25,t=6*Grid.height+25;this.cellPanel.graphics.drawRect(0,0,e,t),this.cellPanel.graphics.endFill(),this.addChild(this.cellPanel),this.cellPanel.width=e,this.cellPanel.height=t,this.cellPanel.anchorOffsetX=e/2,this.cellPanel.anchorOffsetY=t,this.cellPanel.x=Display.winSize.cx,this.cellPanel.y=Display.winSize.height-10;for(var n=RES.getRes("cellCfg_json"),i=0;6>i;i++)for(var r=0;6>r;r++){var a=this.createCell(i,r),s=parseInt(n[1][i][r]);a.setNum(s),this.cellPanel.addChild(a)}},i.createCell=function(e,t){var n=new Grid(e,t),i=GridMgr.getDifferentNum(e,t);return n.setNum(i),GridMgr.addCell(n),n.x=GridMgr.getPositionX(t),n.y=GridMgr.getPositionY(e),n.addEventListener(GameAddOneEvent.CellAddOne,this.onCellAddOne,this),n.addEventListener(GameAddOneEvent.CellRemove,this.onCellRemove,this),n.addEventListener(GameAddOneEvent.CellAddPos,this.onCellAddPos,this),n.addEventListener(GameAddOneEvent.CellMoveOver,this.onCellMoveOver,this),n},i.onCellMoveOver=function(e){if(GridMgr.isMoveOver()){GridMgr.allCellTurnToNormal();var t=GridMgr.getCleanList();if(t)for(var n in t){var i=t[n];i.removeSelf()}}},i.fillAllCell=function(){for(var e=GameAddOneCfg.Grid.row-1;e>=0;e--)for(var t=0;t<GameAddOneCfg.Grid.column;t++){var n=GridMgr._cellArray[e][t];if(null==n){var i=this.createCell(e,t);i.fill(),this.cellPanel.addChild(i)}}},i.onCellAddPos=function(e){egret.log("addPos");var t=e.currentTarget,n=GridMgr.getSameCellByCell(t);for(var i in n){var r=n[i];r.removeSelf()}},i.onCellAddOne=function(e){var t=e.currentTarget,n=GridMgr.getSameCellByCell(t);if(n.push(t),n.length>=3)for(var i in n){var r=n[i];r.highlightShow()}else GridMgr.dropAllCell(),GridMgr.allCellTurnToNormal(),this.fillAllCell()},i.onCellRemove=function(e){GridMgr.isMoveOver()&&(console.log("remove"),GridMgr.dropAllCell(),GridMgr.allCellTurnToNormal(),this.fillAllCell())},t}(egret.DisplayObjectContainer);egret.registerClass(GameAddOneScene,"GameAddOneScene");var Grid=function(e){function t(n,i){e.call(this),this.checkFlag=!1,this.moveFlag=!1,this.isHeightLight=!1,this.num=0,this.row=0,this.column=0,this.row=n,this.column=i,this.width=t.width,this.height=t.height,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.init(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.init=function(){this._bg=new egret.Sprite,this.addChild(this._bg),this._numLabel=new eui.Label,this._numLabel.touchEnabled=!1,this.addChild(this._numLabel)},i.resetColor=function(){var e=GameAddOneCfg.colorArray[this.num-1];this._bg.graphics.clear(),this._bg.graphics.beginFill(e,1),this._bg.graphics.drawRoundRect(0,0,t.width,t.height,20,20),this._bg.graphics.endFill()},i.setNum=function(e){this.num=e,this._numLabel.text=e.toString(),this._numLabel.anchorOffsetX=this._numLabel.width/2,this._numLabel.anchorOffsetY=this._numLabel.height/2,this._numLabel.x=this.width/2,this._numLabel.y=this.height/2,this.resetColor()},i.onClick=function(){if(this.isHeightLight){var e=new GameAddOneEvent(GameAddOneEvent.CellAddPos);this.dispatchEvent(e)}else{this.num++;var t=egret.Tween.get(this);t.to({scaleX:.7,scaleY:1.1},100).to({scaleX:1,scaleY:.8},80).to({scaleX:1,scaleY:1},10).call(function(){this.setNum(this.num);var e=new GameAddOneEvent(GameAddOneEvent.CellAddOne);this.dispatchEvent(e)},this)}},i.removeSelf=function(){if(0==this.moveFlag){this.moveFlag=!0,GridMgr.RemoveCell(this);var e=egret.Tween.get(this);e.to({scaleX:.6,scaleY:.6},300,egret.Ease.backOut).call(function(){this.moveFlag=!1;var e=new GameAddOneEvent(GameAddOneEvent.CellRemove);this.dispatchEvent(e),this.parent.removeChild(this)},this)}},i.highlightShow=function(){this.isHeightLight=!0;var e=GameAddOneCfg.colorArray[this.num-1];this._bg.graphics.clear(),this._bg.graphics.beginFill(e,1),this._bg.graphics.drawCircle(t.width/2,t.height/2,t.width/2),this._bg.graphics.endFill()},i.normalShow=function(){this.isHeightLight=!1,this.resetColor()},i.moveToPos=function(e,t){if(0==this.moveFlag){this.moveFlag=!0,this.row=e,this.column=t;var n=GridMgr.getPositionX(this.column),i=GridMgr.getPositionY(this.row),r=egret.Tween.get(this);r.to({x:n,y:i},400,egret.Ease.bounceOut).call(function(){this.moveFlag=!1;var e=new GameAddOneEvent(GameAddOneEvent.CellMoveOver);this.dispatchEvent(e)},this)}},i.fill=function(){if(0==this.moveFlag){this.moveFlag=!0;var e=GridMgr.getPositionX(this.column),n=-t.height;this.x=e,this.y=n;var i=GridMgr.getPositionX(this.column),r=GridMgr.getPositionY(this.row),a=egret.Tween.get(this);a.to({x:i,y:r},400,egret.Ease.bounceOut).call(function(){this.moveFlag=!1;var e=new GameAddOneEvent(GameAddOneEvent.CellMoveOver);this.dispatchEvent(e)},this)}},t.width=60,t.height=60,t}(egret.Sprite);egret.registerClass(Grid,"Grid");var GridMgr=function(){function e(){}var t=(__define,e);t.prototype;return e.init=function(){for(var t=0;6>t;t++){e._cellArray.push([]);for(var n=0;6>n;n++)e._cellArray[t][n]=null}},e.addCell=function(t){var n=t.row,i=t.column;e._cellArray[n][i]=t},e.getPositionX=function(e){var t=e*(Grid.width+5)+Grid.width/2;return t},e.getDifferentNum=function(e,t){var n=[1,2,3,4,5,6,7,8,9,10],i=[];if(t-1>=0){var r=this._cellArray[e][t-1];if(r){var a=r.num;i.push(a)}}if(t+1<GameAddOneCfg.Grid.column){var s=this._cellArray[e][t+1];if(s){var o=s.num;i.push(o)}}if(e-1>=0){var l=this._cellArray[e-1][t];if(l){var h=l.num;i.push(h)}}if(e+1<GameAddOneCfg.Grid.row){var c=this._cellArray[e+1][t];if(c){var d=c.num;i.push(d)}}for(var g in i){var u=i[g];Util.removeByElements(n,u)}var v=n.length,f=Math.floor(Math.random()*v);return n[f]},e.getPositionY=function(e){var t=e*(Grid.height+5)+Grid.height/2;return t},e.getCleanCell=function(){for(var t=0;t<GameAddOneCfg.Grid.row;t++)for(var n=0;n<GameAddOneCfg.Grid.column;n++){var i=e._cellArray[t][n];if(i&&0==i.checkFlag){var r=[];if(r.push(i),this.getSameCell(i,r),r.length>=2)for(var a in r){var s=r[a];s.removeSelf()}}}this.setAllCellCheckFlag(!1)},e.getCleanList=function(){for(var e=GameAddOneCfg.Grid.row-1;e>=0;e--)for(var t=0;t<GameAddOneCfg.Grid.column;t++){var n=this._cellArray[e][t],i=this.getSameCellByCell(n);if(i.push(n),i.length>=3)return i}return null},e.getSameCellByCell=function(e){var t=[];return this.getSameCell(e,t),t.length>=2?(this.setAllCellCheckFlag(!1),t):(this.setAllCellCheckFlag(!1),[])},e.RemoveCell=function(e){var t=e.row,n=e.column;this._cellArray[t][n]=null},e.isMoveOver=function(){for(var t=0;t<GameAddOneCfg.Grid.row;t++)for(var n=0;n<GameAddOneCfg.Grid.column;n++){var i=e._cellArray[t][n];if(i&&1==i.moveFlag)return!1}return!0},e.allCellTurnToNormal=function(){for(var t=0;t<GameAddOneCfg.Grid.row;t++)for(var n=0;n<GameAddOneCfg.Grid.column;n++){var i=e._cellArray[t][n];i&&i.normalShow()}},e.setAllCellCheckFlag=function(t){for(var n=0;n<GameAddOneCfg.Grid.row;n++)for(var i=0;i<GameAddOneCfg.Grid.column;i++){var r=e._cellArray[n][i];r&&(r.checkFlag=t)}},e.getSameCell=function(e,t){e.checkFlag=!0;var n=e.row,i=e.column;if(i-1>=0){var r=this._cellArray[n][i-1];r&&r.num==e.num&&0==r.checkFlag&&(t.push(r),this.getSameCell(r,t))}if(i+1<GameAddOneCfg.Grid.column){var a=this._cellArray[n][i+1];a&&a.num==e.num&&0==a.checkFlag&&(t.push(a),this.getSameCell(a,t))}if(n-1>=0){var s=this._cellArray[n-1][i];s&&s.num==e.num&&0==s.checkFlag&&(t.push(s),this.getSameCell(s,t))}if(n+1<GameAddOneCfg.Grid.row){var o=this._cellArray[n+1][i];o&&o.num==e.num&&0==o.checkFlag&&(t.push(o),this.getSameCell(o,t))}},e.dropAllCell=function(){for(var t=GameAddOneCfg.Grid.row-1;t>=0;t--)for(var n=0;n<GameAddOneCfg.Grid.column;n++){var i=e._cellArray[t][n];if(i){var r=this.getFillPos(i.row,i.column);(i.row!=r.row||i.column!=r.column)&&(this.swapCell(i,r.row,r.column),i.moveToPos(r.row,r.column))}}},e.swapCell=function(e,t,n){this._cellArray[t][n]=e,this._cellArray[e.row][e.column]=null,e.row=t,e.column=n},e.getFillPos=function(e,t){for(var n={row:e,column:t},i=e+1;i<GameAddOneCfg.Grid.row;){var r=this._cellArray[i][t];if(null!=r)break;n.row++,i++}return n},e._cellArray=[],e}();egret.registerClass(GridMgr,"GridMgr");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},i.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var n=100047564,i="果汁世界";egret_4399_h5api.initGame(n,i,this.stage.stageWidth,this.stage.stageHeight),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},i.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},i.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},i.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},i.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},i.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},i.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},i.startCreateScene=function(){Director.getInstance().initWithMain(this),PlayerData.initData(),DCAgentMgr.init(),SceneMgr.gotoLogoin()},t}(eui.UILayer);egret.registerClass(Main,"Main");var ChatItem=function(e){function t(t){e.call(this),this.skinName="ChatItemSkin",this.wordLabel.text=t.toString(),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){},t}(eui.Component);egret.registerClass(ChatItem,"ChatItem");var ChatScene=function(e){function t(){e.call(this),this.skinName="ChatSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this)},i.onSend=function(){var e=this.inputWord.text;if(e){var t={word:e};Net.getInstance().sendHttpRequest(NetMsg.arr.chat.send,t)}},t}(eui.Component);egret.registerClass(ChatScene,"ChatScene");var Cell=function(e){function t(t){e.call(this),this.id=0,this.row=0,this.column=0,this.moveFlag=!1,this.checkFlag=!1,this.sprite=null,this.isAction=!1,this.isSelected=!1,this.moveSpeed=400,this.id=t,this.sprite=new eui.Image,this.addChild(this.sprite),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.init()},i.init=function(){var e=["1_png","2_png","3_png","4_png","5_png"];e=["game_Apple_png","game_Blueberry_png","game_Grape_png","game_Lemon_png","game_Watermelon_png"];var n=e[this.id-1],i=RES.getRes(n);i&&(this.width=t.CellWidth,this.height=t.CellHeight,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.sprite.source=i,this.sprite.width=t.CellWidth,this.sprite.height=t.CellHeight,this.sprite.anchorOffsetX=this.sprite.width/2,this.sprite.anchorOffsetY=this.sprite.height/2,this.sprite.x=this.width/2,this.sprite.y=this.height/2)},i.initTouch=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegan,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this)},i.onBegan=function(){egret.log("Cell Touch Began")},i.noticeAction=function(){egret.Tween.removeTweens(this);var e=egret.Tween.get(this,{loop:!0});e.to({scaleX:.8,scaleY:.8},300).to({scaleX:1,scaleY:1},300)},i.setSelect=function(e){this.isSelected!=e&&(this.isSelected=e,e&&this.runSelectedAni())},i.runSelectedAni=function(){if(0==this.isAction){this.isAction=!0,SoundsMgr.clickCell(),egret.Tween.removeTweens(this);var e=egret.Tween.get(this);e.to({scaleX:.8,scaleY:1.3},100,egret.Ease.bounceIn).to({scaleX:1.1,scaleY:1},100,egret.Ease.bounceOut).to({scaleX:1,scaleY:1},100,egret.Ease.backIn).call(function(){this.isAction=!1},this)}},i.onMove=function(){},i.onEnd=function(){},i.clean=function(){Util.removeByElements(CellMgr.cleanList,this),CellMgr.cleanCell(this);var e=egret.Tween.get(this);e.to({scaleX:.4,scaleY:.4},200).call(function(){this.sendCleanOverEvent()},this).wait(50).call(function(e){this.parent?this.parent.removeChild(this):egret.log("no parent")},this,[this])},i.sendCleanOverEvent=function(){var e=new GameEvent(GameEvent.CleanOver);this.dispatchEvent(e)},i.getDistance=function(e,t){var n=Math.pow(t.x-e.x,2),i=Math.pow(t.y-e.y,2),r=Math.sqrt(n+i);return r},i.drop=function(e,t){var n=CellMgr.getCellPosX(t),i=CellMgr.getCellPosY(e),r=this.getDistance({x:this.x,y:this.y},{x:n,y:i}),a=r/this.moveSpeed*1e3;this.moveFlag=!0,CellMgr.setCell(this,e,t);var s=egret.Tween.get(this);s.to({x:n,y:i},a,egret.Ease.bounceOut).call(function(){this.moveFlag=!1,this.sendDropOverEvent()},this)},i.sendDropOverEvent=function(){var e=new GameEvent(GameEvent.DropOver);this.dispatchEvent(e)},t.CellWidth=60,t.CellHeight=60,t}(egret.Sprite);egret.registerClass(Cell,"Cell");var CellMgr=function(){function e(){}var t=(__define,e);t.prototype;return e.cleanCellArray=function(){this.cellArray=[];for(var e=0;e<GameCfg.row;e++){this.cellArray.push([]);for(var t=0;t<GameCfg.column;t++)this.cellArray[e].push(null)}},e.genDropCellId=function(e,t){var n=[1,2,3,4,5],i=Math.random()*n.length,r=Math.floor(i);return n[r]},e.genInitCellId=function(e,t){var n=RES.getRes("gameCellCfg_json"),i=n[1],r=i[e][t];return r},e.removeAllCellAction=function(){for(var e in this.cellArray)for(var t in this.cellArray[e]){var n=this.cellArray[e][t];n&&(egret.Tween.removeTweens(n),n.scaleX=n.scaleY=1)}},e.setAllCellCheckFlag=function(e){for(var t in this.cellArray)for(var n in this.cellArray[t]){var i=this.cellArray[t][n];i&&(i.checkFlag=e)}},e.getNowCleanListNum=function(){var e=[];for(var t in this.cellArray)for(var n in this.cellArray[t]){var i=this.cellArray[t][n];if(i&&0==i.checkFlag){var r=[i];this.getSameArrByCell(i,r),r.length>=GameCfg.baseCleanNum&&e.push(r)}}return this.setAllCellCheckFlag(!1),e},e.getSameArrByCell=function(e,t){var n=e.row,i=e.column,r=e.id;e.checkFlag=!0;var a=n,s=i-1;if(s>=0){var o=this.cellArray[a][s];o.id==r&&0==o.checkFlag&&(o.checkFlag=!0,this.getSameArrByCell(o,t),t.push(o))}var l=n,h=i+1;if(h<GameCfg.column){var c=this.cellArray[l][h];c.id==r&&0==c.checkFlag&&(c.checkFlag=!0,this.getSameArrByCell(c,t),t.push(c))}var d=n+1,g=i;if(d<GameCfg.row){var u=this.cellArray[d][g];u.id==r&&0==u.checkFlag&&(u.checkFlag=!0,this.getSameArrByCell(u,t),t.push(u))}var v=n-1,f=i;if(v>=0){var p=this.cellArray[v][f];p.id==r&&0==p.checkFlag&&(p.checkFlag=!0,this.getSameArrByCell(p,t),t.push(p))}},e.setCell=function(e,t,n){var i=e.row,r=e.column;this.cellArray[i][r]=null,e.row=t,e.column=n,this.cellArray[t][n]=e},e.cleanCell=function(e){var t=e.row,n=e.column;this.cellArray[t][n]=null},e.getCellPosX=function(e){var t=Cell.CellWidth/2,n=e*(Cell.CellWidth+GameCfg.columnSpace)+t;return n},e.getCellPosY=function(e){var t=Cell.CellHeight/2,n=e*(Cell.CellHeight+GameCfg.rowSpace)+t;return n},e.getTouchCell=function(e,t){for(var n in this.cellArray){var i=this.cellArray[n];for(var r in i){var a=i[r];if(a){var s=a.hitTestPoint(e,t);if(s)return a}}}return null},e.getCleanListID=function(){if(this.cleanList.length>0){var e=this.cleanList[0];return e.id}return 0},e.isInArround=function(e){var t=e.row,n=e.column,i=this.cleanList.length;if(i>0){var r=this.cleanList[i-1],a=r.row,s=r.column;if(!(a!=t+1&&a!=t-1&&a!=t||s!=n+1&&s!=n-1&&s!=n))return!0}return!1},e.getIsLastTwoInCleanList=function(e){var t=this.cleanList.length;if(t>=2){var n=t-2,i=this.cleanList[n];if(i==e)return!0}return!1},e.removeTopItemInCleanList=function(){var e=this.cleanList.length;if(e>0){var t=this.cleanList[e-1];return Util.removeByElements(this.cleanList,t),t}},e.removeTopLine=function(){var e=this.lineArray.length;if(e>0){var t=this.lineArray[e-1];Util.removeByElements(this.lineArray,t),t.parent&&t.parent.removeChild(t)}},e.isAllMove=function(){for(var e in this.cellArray){var t=this.cellArray[e];for(var n in t){var i=t[n];if(i&&1==i.moveFlag)return!0}}return!1},e.getEmptyCell=function(){for(var t=[],n=GameCfg.row-1;n>=0;n--)for(var i=0;i<GameCfg.column;i++){var r=e.cellArray[n][i];if(null==r){var a={row:n,column:i};t.push(a)}}return t},e.getDropRowAndColumn=function(e){var t=e.row,n=e.column,i={row:t,column:n};for(t++;t<GameCfg.row;){var r=this.cellArray[t][n];if(null!=r)break;i.row++,t++}return i},e.cellArray=[],e.cleanList=[],e.lineArray=[],e}();egret.registerClass(CellMgr,"CellMgr");var CleanWithLineGameScene=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){},t}(eui.Component);egret.registerClass(CleanWithLineGameScene,"CleanWithLineGameScene");var GameCfg=function(){function e(){}var t=(__define,e);t.prototype;return e.row=6,e.rowSpace=20,e.column=6,e.columnSpace=20,e.baseCleanNum=3,e}();egret.registerClass(GameCfg,"GameCfg");var GameData=function(){function e(){}var t=(__define,e);t.prototype;return e.reset=function(){this.enterLv=0,this.curStep=0,this.targetStep=0,this.curScore=0,this.targetScore=0,this.isOver=!1,this.isWin=!1},e.initLvData=function(t){this.reset();var n=CfgFileMgr.getLvCfgDatayId(t);e.targetScore=parseInt(n.score),e.targetStep=parseInt(n.step),e.curStep=e.targetStep,e.enterLv=t},e.enterLv=0,e.curStep=0,e.targetStep=0,e.curScore=0,e.targetScore=0,e.isOver=!1,e.isWin=!1,e}();egret.registerClass(GameData,"GameData");var GameState;!function(e){e[e.DealLogic=0]="DealLogic",e[e.Play=1]="Play"}(GameState||(GameState={}));var GameEvent=function(e){function t(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),e.call(this,t,n,i)}__extends(t,e);var n=(__define,t);n.prototype;return t.CleanOver="CleanOver",t.DropOver="DropOver",t}(egret.Event);egret.registerClass(GameEvent,"GameEvent");var GameMissionProgress=function(e){function t(){e.call(this),this.skinName="GameMissionProgressSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){},t}(eui.Component);egret.registerClass(GameMissionProgress,"GameMissionProgress");var GameProgress=function(e){function t(){e.call(this),this.skinName=GameProgressSkin}__extends(t,e);var n=(__define,t);n.prototype;return t}(eui.Component);egret.registerClass(GameProgress,"GameProgress");var GameScene=function(e){function t(){e.call(this),this.state=GameState.Play,this.toBottom=250,this.map=null,this.cleanIndex=0,this.UILayer=new GameUI,this.addChild(this.UILayer),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this),this.onLoadMap()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onLoadMap=function(){var e="resource/cleanGame/tmx/map1.tmx",t=new egret.URLLoader;t.dataFormat=egret.URLLoaderDataFormat.TEXT,t.addEventListener(egret.Event.COMPLETE,function(t){var n=egret.XML.parse(t.target.data);this.map=new tiled.TMXTilemap(2e3,2e3,n,e),this.map.render(),this.map.addEventListener(tiled.TMXImageLoadEvent.ALL_IMAGE_COMPLETE,this.onLoaded,this),this.addChildAt(this.map,1)},this),t.load(new egret.URLRequest(e))},i.onLoaded=function(){if(this.map){return this.map.visible=!0,void(this.map.scaleX=this.map.scaleY=8/9)}},i.addStage=function(){this.initStage(),this.initLinePanel(),this.initCellPanel(),this.initCell(),this.addChildAt(this.UILayer,1e3)},i.onBtn=function(){},i.initStage=function(){var e=new egret.Sprite;e.name="stageBg",e.graphics.beginFill(10066329,.8),e.graphics.drawRect(0,0,Display.winSize.width,Display.winSize.height),e.graphics.endFill(),e.visible=!1,this.addChild(e)},i.initCell=function(){CellMgr.cleanList=[],CellMgr.cleanCellArray();for(var e=0;e<GameCfg.row;e++)for(var t=0;t<GameCfg.column;t++){var n=CellMgr.genInitCellId(e,t),i=this.createCell(e,t,n);i.x=CellMgr.getCellPosX(t),i.y=CellMgr.getCellPosY(e)}},i.createCell=function(e,t,n){var i=new Cell(n);return i.row=e,i.column=t,i.addEventListener(GameEvent.CleanOver,this.cleanOneByeOne,this),i.addEventListener(GameEvent.DropOver,this.onDropOver,this),CellMgr.cellArray[e][t]=i,this.cellPanel.addChild(i),i},i.initLinePanel=function(){this.linePanel=new egret.Sprite,this.linePanel.name="linePanel",this.linePanel.width=GameCfg.column*Cell.CellWidth+(GameCfg.column-1)*GameCfg.columnSpace,this.linePanel.height=GameCfg.row*Cell.CellHeight+(GameCfg.row-1)*GameCfg.rowSpace,this.linePanel.anchorOffsetX=this.linePanel.width/2,this.linePanel.anchorOffsetY=this.linePanel.height,this.linePanel.x=Display.winSize.cx,this.linePanel.y=Display.winSize.height-this.toBottom,this.linePanel.graphics.beginFill(65280,0),this.linePanel.graphics.drawRect(0,0,this.linePanel.width,this.linePanel.height),this.linePanel.graphics.endFill(),this.addChild(this.linePanel)},i.initCellPanel=function(){this.cellPanel=new egret.Sprite,this.cellPanel.name="cellPanel",this.cellPanel.width=GameCfg.column*Cell.CellWidth+(GameCfg.column-1)*GameCfg.columnSpace,this.cellPanel.height=GameCfg.row*Cell.CellHeight+(GameCfg.row-1)*GameCfg.rowSpace,this.cellPanel.anchorOffsetX=this.cellPanel.width/2,this.cellPanel.anchorOffsetY=this.cellPanel.height,this.cellPanel.x=Display.winSize.cx,this.cellPanel.y=Display.winSize.height-this.toBottom;var e=new eui.Rect(this.cellPanel.width,this.cellPanel.height,255);e.alpha=0,this.cellPanel.addChild(e),this.cellPanel.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegan,this),this.cellPanel.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.cellPanel.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this.cellPanel.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outSide,this),this.addChild(this.cellPanel)},i.outSide=function(){this.onEnd()},i.onBegan=function(e){if(this.state==GameState.Play){this.deleteCleanList();var t=e.stageX,n=e.stageY,i=CellMgr.getTouchCell(t,n);if(i){i.setSelect(!0),this.pushCleanCell(i),egret.log("row: "+i.row+", column: "+i.column);var r=new egret.Point(i.x,i.y);this.createPointLine(r),this.pointLineBeganCell=i}}},i.createPointLine=function(e){this.pointLine&&this.pointLine.parent&&this.pointLine.parent.removeChild(this.pointLine),this.pointLine=new eui.Image,this.pointLine.texture=RES.getRes("line_png"),this.pointLine.width=0,this.pointLine.anchorOffsetX=0,this.pointLine.anchorOffsetY=this.pointLine.height/2,this.pointLine.x=e.x,this.pointLine.y=e.y,this.linePanel.addChild(this.pointLine)},i.updatePointLineEnd=function(e,t){if(this.pointLine&&this.pointLineBeganCell){var n=new egret.Point(this.pointLineBeganCell.x,this.pointLineBeganCell.y),i=this.linePanel.globalToLocal(e,t),r=egret.Point.distance(n,i);this.pointLine.width=r,this.pointLine.x=n.x,this.pointLine.y=n.y,this.pointLine.anchorOffsetX=0,this.pointLine.anchorOffsetY=this.pointLine.height/2;var a=this.getAngle(n,i);this.pointLine.rotation=a}},i.updatePointLineBegan=function(e,t){var n=CellMgr.cleanList.length;if(n>0){var i=CellMgr.cleanList[n-1];this.pointLineBeganCell=i,this.updatePointLineEnd(e,t)}},i.onMove=function(e){if(this.state==GameState.Play){var t=e.stageX,n=e.stageY;this.updatePointLineEnd(t,n);var i=CellMgr.getTouchCell(t,n);if(i)if(i.isSelected){var r=CellMgr.getIsLastTwoInCleanList(i);if(r){CellMgr.removeTopLine();var a=CellMgr.removeTopItemInCleanList();a.setSelect(!1),this.updatePointLineBegan(t,n)}}else{var s=CellMgr.getCleanListID(),o=CellMgr.isInArround(i);i.id==s&&o&&(i.setSelect(!0),this.pushCleanCell(i),this.updatePointLineBegan(t,n))}}},i.onEnd=function(){var e=CellMgr.cleanList.length;egret.log("可以消除的数量为: "+e),e>=GameCfg.baseCleanNum&&this.state==GameState.Play&&(this.state=GameState.DealLogic,this.cleanOneByeOne());for(var t in CellMgr.cleanList){var n=CellMgr.cleanList[t];n.setSelect(!1)}this.cleanAllLine()},i.cleanAllLine=function(){this.linePanel.removeChildren()},i.cleanOneByeOne=function(){var e=CellMgr.cleanList.length;if(0==e)this.deleteCleanList(),this.dropAndFillCell();else{var t=CellMgr.cleanList[0];this.createDirtyAndScore(t),t.clean(),SoundsMgr.removeCell(this.cleanIndex),this.cleanIndex++}},i.createDirtyAndScore=function(e){var t=["apple_png","blueberry_png","mangosteen_png","lemon_png","watermelon_png"],n=e.id,i=new eui.Image(t[n-1]),r=RES.getRes(t[n-1]);i.anchorOffsetX=r.textureWidth/2,i.anchorOffsetY=r.textureHeight/2,i.x=e.x,i.y=e.y,i.scaleX=i.scaleY=0;var a=360*Math.random();i.rotation=a,this.cellPanel.addChild(i);var s=egret.Tween.get(i);s.to({scaleX:1.2,scaleY:1.2},400,egret.Ease.bounceOut).wait(200).to({alpha:0},100).call(function(e){e&&e.parent&&e.parent.removeChild(e)},this,[i]);var o=10;this.UILayer.addScore(o);var l=new eui.Label;l.text=o.toString(),l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.x=e.x,l.y=e.y,this.cellPanel.addChild(l);var h=egret.Tween.get(l);h.to({y:e.y-40},400).call(function(e){e&&e.parent&&e.parent.removeChild(e)},this,[l])},i.deleteCleanList=function(){CellMgr.cleanList=[],CellMgr.lineArray=[],this.cleanIndex=0},i.onDropOver=function(){var e=CellMgr.isAllMove();0==e&&(egret.log("Drop over"),this.onStepOver())},i.onStepOver=function(){this.state=GameState.Play,this.UILayer.reduceStep()},i.dropAndFillCell=function(){for(var e=GameCfg.row-1;e>=0;e--)for(var t=0;t<GameCfg.column;t++){var n=CellMgr.cellArray[e][t];if(null!=n){var i=CellMgr.getDropRowAndColumn(n),r=i.row,a=i.column;(n.row!=r||n.column!=a)&&n.drop(i.row,i.column)}}var s=CellMgr.getEmptyCell();for(var o in s){var l=s[o].row,h=s[o].column,c=CellMgr.genDropCellId(l,h),d=this.createCell(l,h,c);
d.x=CellMgr.getCellPosX(h),d.y=-Cell.CellHeight/2,d.drop(l,h)}},i.pushCleanCell=function(e){CellMgr.cleanList.push(e);var t=CellMgr.cleanList.length;if(t>1){var n=CellMgr.cleanList[t-2];this.drawLine(n,e)}},i.drawLine=function(e,t){var n=RES.getRes("line_png"),i=new eui.Image;i.texture=n,i.anchorOffsetX=0,i.anchorOffsetY=n.textureHeight/2,this.linePanel.addChild(i),CellMgr.lineArray.push(i),i.x=e.x,i.y=e.y;var r=new egret.Point(e.x,e.y),a=new egret.Point(t.x,t.y),s=egret.Point.distance(r,a);i.width=s;var o=this.getAngle(r,a);i.rotation=o},i.getRotateAngle=function(e,t){var n=0,i=e.row,r=e.column,a=t.row,s=t.column;return a>i?r==s?n=90:r==s-1?n=45:r==s+1&&(n=135):i>a?r==s?n=-90:r==s-1?n=-45:r==s+1&&(n=-135):i==a&&(r==s-1?n=0:r==s+1&&(n=180)),n},i.getAngle=function(e,t){var n=(t.x-e.x,Math.abs(t.y-e.y)),i=egret.Point.distance(e,t),r=Math.round(Math.asin(n/i)/Math.PI*180);return e.x>t.x?e.y>t.y?r+=180:e.y<t.y?r=180-r:e.y==t.y&&(r=180):e.x<t.x?e.y>t.y?r=360-r:e.y<t.y?r=r:e.y==t.y&&(r=0):e.x==t.x&&(e.y>t.y?r=270:e.y<t.y&&(r=90)),r},t}(egret.DisplayObjectContainer);egret.registerClass(GameScene,"GameScene");var GameUI=function(e){function t(){e.call(this),this.star=0,this.skinName="GameUISkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.init(),this.pauseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPause,this)},i.init=function(){this.progress.value=0,this.gold.text="0",this.score.text="0",this.targetScore.text=GameData.targetScore.toString(),this.lv.text=GameData.enterLv.toString(),this.stepScore.text=GameData.targetStep.toString()},i.addScore=function(e){GameData.curScore+=e,this.score.text=GameData.curScore.toString();var t=GameData.targetScore,n=1.5*GameData.targetScore,i=2*GameData.targetScore;GameData.curScore<t?this.showStar(0):GameData.curScore>=t&&GameData.curScore<n?this.showStar(1):GameData.curScore>=n&&GameData.curScore<i?this.showStar(2):this.showStar(3);var r=GameData.curScore/i*100;this.progress.value=r},i.showStar=function(e){this.star=e,this.star1.source="game_rate1_off_png",this.star2.source="game_rate2_off_png",this.star3.source="game_rate3_off_png",1==e?this.star1.source="game_rate1_png":2==e?this.star2.source="game_rate2_png":3==e&&(this.star3.source="game_rate3_png")},i.reduceStep=function(){GameData.curStep--,this.stepScore.text=GameData.curStep.toString(),GameData.curStep<=0?(GameData.curStep=0,0==GameData.isOver&&(GameData.isOver=!0,GameData.isWin=!1,this.addDefeatLayer())):GameData.curScore>=GameData.targetScore&&0==GameData.isOver&&(GameData.isOver=!0,GameData.isWin=!0,this.addWinLayer())},i.addWinLayer=function(){Director.getInstance().pushScene(new WinUI(this.star))},i.addDefeatLayer=function(){Director.getInstance().pushScene(new LoseLayer)},i.onPause=function(){SoundsMgr.playBtn(),this.addChild(new PauseLayer)},i.onBtn=function(){return},t}(eui.Component);egret.registerClass(GameUI,"GameUI");var GameEnterDlg=function(e){function t(t){e.call(this),this.lv=t,this.skinName="GameEnterDlgSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this),this.initData()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.goImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGo,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},i.onClose=function(){SoundsMgr.playBtn(),Director.getInstance().popScene()},i.initData=function(){this.lvLabel.text=this.lv.toString();var e=CfgFileMgr.getLvCfgDatayId(this.lv);if(e){var t="在"+e.step+"步之内达到"+e.score+"分";this.descLabel.text=t}},i.onGo=function(){SoundsMgr.playBtn(),GameData.initLvData(this.lv),SceneMgr.gotoGame()},t}(eui.Component);egret.registerClass(GameEnterDlg,"GameEnterDlg");var LevelState;!function(e){e[e.NONE=0]="NONE",e[e.OPEN=1]="OPEN",e[e.CLOSE=2]="CLOSE"}(LevelState||(LevelState={}));var IndexButton=function(e){function t(){e.call(this),this.state=LevelState.NONE,this.lvNumber=0,this.skinName="IndexButtonSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=__define,i=t,r=i.prototype;return n(r,"lv",function(){return this.lvNumber},function(e){this.lvNumber=e,this.lvLabel.text=this.lvNumber.toString(),this.lvNumber<parseInt(PlayerData.data.fightLv)?this.setData(LevelState.OPEN):this.lvNumber==parseInt(PlayerData.data.fightLv)?(this.setData(LevelState.OPEN),this.showIcon()):this.setData(LevelState.CLOSE)}),r.showIcon=function(){this.icon.visible=!0;var e=egret.Tween.get(this.icon,{loop:!0}),t=this.icon.y;e.to({y:t+20},1200,egret.Ease.backIn).to({y:t},500,egret.Ease.backOut)},r.setData=function(e){this.state=e,this.bg.source=this.getStateImage()},r.addStage=function(){},r.getStateImage=function(){return this.state==LevelState.CLOSE?"selet_g_lock_png":this.state==LevelState.OPEN?"selet_g_green_png":""},t}(eui.Component);egret.registerClass(IndexButton,"IndexButton");var IndexGroup=function(e){function t(){e.call(this),this.skinName="IndexGroupSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){var e=[this.btn1,this.btn2,this.btn3,this.btn4,this.btn5,this.btn6,this.btn7,this.btn8,this.btn9,this.btn10,this.btn11,this.btn12,this.btn13];for(var t in e){var n=e[t];n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickBtn,this)}},i.clickBtn=function(e){SoundsMgr.playBtn();var t=e.currentTarget,n=t.lv;n<=parseInt(PlayerData.data.fightLv)?Director.getInstance().pushScene(new GameEnterDlg(n)):(new Tips).show("不能进入")},t}(eui.Component);egret.registerClass(IndexGroup,"IndexGroup");var IndexScene=function(e){function t(){e.call(this),this.prePoint=new egret.Point,this.indexUI=new IndexUI,this.addChild(this.indexUI),this.skinName="IndexSceneSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.initData(),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegan,this)},i.initData=function(){this.list.addChild(new IndexGroup);var e={1:0,2:0,3:0,4:256,5:559,6:778,7:1e3,8:1284,9:1461,10:1617,11:1640,12:1640,13:1640};this.list.scrollV=e[PlayerData.data.fightLv.toString()]},i.onBegan=function(e){this.prePoint.x=e.stageX,this.prePoint.y=e.stageY},i.onMove=function(e){var t=e.stageX,n=e.stageY;this.prePoint.x=t,this.prePoint.y=n},i.onEnd=function(e){this.prePoint.x=e.stageX,this.prePoint.y=e.stageY},t}(eui.Component);egret.registerClass(IndexScene,"IndexScene");var IndexUI=function(e){function t(){e.call(this),this.skinName="IndexUISkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.addGoldBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){(new Tips).show("功能暂未开放")},this),this.addHeartBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){(new Tips).show("功能暂未开放")},this)},t}(eui.Component);egret.registerClass(IndexUI,"IndexUI");var ResLoading=function(e){function t(){e.call(this),this.loadGroups=[],this.skinName="ResLoadingSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.update,this)},i.update=function(){this.circle.rotation+=3},i.load=function(e,t){egret.log("[ResLoading] 加载组:"+e),this.index=0,this.loadGroups=e,this.callback=t,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(this.loadGroups[this.index])},i.isAllLoaded=function(){for(var e=!0,t=0;t<this.loadGroups.length;t++)e=e&&RES.isGroupLoaded(this.loadGroups[t]);return e},i.loadFinish=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.parent&&this.parent.removeChild(this),this.callback&&this.callback.exec()},i.onResourceLoadComplete=function(e){var t=this.isAllLoaded();egret.log("[LoadingCircle] group "+e.groupName+" loaded"),t?this.loadFinish():(this.index++,RES.loadGroup(this.loadGroups[this.index]))},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},i.onResourceProgress=function(e){this.setProgress(e.itemsLoaded,e.itemsTotal),egret_4399_h5api.progress(e.itemsLoaded/e.itemsTotal*100)},i.setProgress=function(e,t){this.textLabel.text=e+"/"+t},t}(eui.Component);egret.registerClass(ResLoading,"ResLoading");var Logoin=function(e){function t(){e.call(this),this.skinName="LogoinSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.initDB(),this.beganBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegan,this);var e=egret.Tween.get(this.beganBtn,{loop:!0});e.to({scaleX:.8,scaleY:.8},1e3).to({scaleX:1,scaleY:1},1e3)},i.initDB=function(){var e=RES.getRes("tree_json"),t=RES.getRes("textureTree_json"),n=RES.getRes("textureTree_png"),i=new dragonBones.EgretFactory;i.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(e)),i.addTextureAtlas(new dragonBones.EgretTextureAtlas(n,t));var r=i.buildArmature("Armature");this.treeGroup.addChild(r.display),r.display.x=150,r.display.y=200,dragonBones.WorldClock.clock.add(r),r.animation.gotoAndPlay("run",-1,-1,0),egret.Ticker.getInstance().register(function(e){dragonBones.WorldClock.clock.advanceTime(.01)},this)},i.onBegan=function(){SoundsMgr.playBtn(),SceneMgr.gotoIndex()},t}(eui.Component);egret.registerClass(Logoin,"Logoin");var LoseLayer=function(e){function t(){e.call(this),this.skinName="LoseLayerSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this),SoundsMgr.lose()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.btnAgain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgain,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},i.onAgain=function(){SceneMgr.rePlayLv()},i.onClose=function(){Director.getInstance().repleaceScene(new IndexScene)},t}(eui.Component);egret.registerClass(LoseLayer,"LoseLayer");var PauseLayer=function(e){function t(){e.call(this),this.skinName="PauseLayerSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SoundsMgr.playBtn(),this.parent&&this.parent.removeChild(this)},this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SoundsMgr.playBtn(),SceneMgr.rePlayLv()},this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SoundsMgr.playBtn(),Director.getInstance().repleaceScene(new IndexScene)},this)},t}(eui.Component);egret.registerClass(PauseLayer,"PauseLayer");var ClickButton=function(e){function t(){e.call(this),this.skinName="ClickButtonSkin"}__extends(t,e);var n=__define,i=t,r=i.prototype;return n(r,"btnIcon",function(){return this.icon.source},function(e){var t=RES.getRes(e);t&&(this.icon.source=t,this.icon.x=this.icon.y=0,this.width=t.textureWidth,this.height=t.textureHeight,this.anchorOffsetX=t.textureWidth/2,this.anchorOffsetY=t.textureHeight/2)}),r.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t}(eui.Component);egret.registerClass(ClickButton,"ClickButton");var DragonBonesTestLayer=function(e){function t(){e.call(this),this.init()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.init=function(){var e=RES.getRes("Robot_json"),t=RES.getRes("texture_json"),n=RES.getRes("texture_png"),i=new dragonBones.EgretFactory;i.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(e)),i.addTextureAtlas(new dragonBones.EgretTextureAtlas(n,t));var r=i.buildArmature("Robot");this.addChild(r.display),r.display.x=200,r.display.y=300,r.display.scaleX=r.display.scaleY=.5,dragonBones.WorldClock.clock.add(r),r.animation.gotoAndPlay("run"),egret.Ticker.getInstance().register(function(e){dragonBones.WorldClock.clock.advanceTime(.01)},this)},t}(egret.DisplayObjectContainer);egret.registerClass(DragonBonesTestLayer,"DragonBonesTestLayer");var LeanCloudTest=function(e){function t(){e.call(this),this.skinName="LeanCloudTestSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtn,this)},i.onBtn=function(){},t}(eui.Component);egret.registerClass(LeanCloudTest,"LeanCloudTest");var WinUI=function(e){function t(t){e.call(this),this.star=0,this.skinName="WinUISkin",this.star=t,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this),SoundsMgr.win()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.btn1Bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickBtn1,this),this.btn2Bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickBtn2,this),this.btn3Bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickBtn3,this),this.init(),this.saveData(),this.initStar()},i.initStar=function(){var e=[this.star1,this.star2,this.star3];for(var t in e)e[t].visible=!1;for(var n=0;n<this.star;n++)e[n].visible=!0},i.saveData=function(){PlayerData.saveLv(GameData.enterLv+1)},i.init=function(){this.numLabel.text=GameData.curScore.toString()},i.clickBtn1=function(){SceneMgr.gotoIndex()},i.clickBtn2=function(){SceneMgr.rePlayLv()},i.clickBtn3=function(){GameData.initLvData(GameData.enterLv+1),SceneMgr.gotoGame()},t}(eui.Component);egret.registerClass(WinUI,"WinUI");var Net=function(){function e(){this._url=null,this._url="http://localhost:63342/workerMan/Game/Test.php"}var t=(__define,e),n=t.prototype;return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},n.sendHttpRequest=function(e,t){void 0===t&&(t=null);var n=new egret.URLLoader;n.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),n.dataFormat=egret.URLLoaderDataFormat.TEXT;var i=JSON.stringify(t),r=new egret.URLVariables;r.variables={msg:e,data:i};var a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST,a.url=this._url,a.data=r,n.load(a)},n.onLoadError=function(){console.log("服务器连接失败")},n.onLoadComplete=function(e){var t=e.target,n=t.data;egret.log("返回数据："+n)},e.instance=null,e}();egret.registerClass(Net,"Net");var NetError=function(e){function t(t){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(eui.Component);egret.registerClass(NetError,"NetError");var NetMsg=function(){function e(){}var t=(__define,e);t.prototype;return e.arr={chat:{send:"chat.sendMsg"}},e}();egret.registerClass(NetMsg,"NetMsg");var NetWait=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(eui.Component);egret.registerClass(NetWait,"NetWait");var Test=function(e){function t(){e.call(this),this.skinName="TestSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){this.btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBtn,this)},i.initMusic=function(){var e=RES.getRes("bg_mp3");e&&e.play(0,1)},i.onBtn=function(){this.label.strokeColor=65280,this.label.stroke=1;var e=RES.getRes("bg_mp3");e&&e.play(0,1)},t}(eui.Component);egret.registerClass(Test,"Test");var ThemeAdapter=function(){function e(){}var t=(__define,e),n=t.prototype;return n.getTheme=function(e,t,n,i){function r(e){t.call(i,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var Cannon=function(e){function t(){e.call(this),this.skinName="",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){},i.shoot=function(e,t){var n=90,i=egret.Tween.get(this.cannon);i.to({rotation:n},200).call(function(){},this)},i.changeCannon=function(){this.cannon.source="";var e=RES.getRes("");this.cannon.anchorOffsetX=e.textureWidth/2,this.cannon.anchorOffsetY=e.textureHeight/2},t}(eui.Component);egret.registerClass(Cannon,"Cannon");var Fish=function(e){function t(){e.call(this),this.initView()}__extends(t,e);var n=__define,i=t,r=i.prototype;return r.initView=function(){this.mc=Animation.makeAni("fish4"),this.mc&&(this.mc.gotoAndPlay("run",-1),this.addChild(this.mc));egret.Tween.get(this)},r.swimming=function(){var e=egret.Tween.get(this,{loop:!0});e.to({x:480,y:800},4e3)},r.isUnderAtk=function(e,t){this.hitTestPoint(e,t)},n(r,"factor",function(){return 0},function(e){this.x=(1-e)*(1-e)*100+2*e*(1-e)*300+e*e*100,this.y=(1-e)*(1-e)*100+2*e*(1-e)*300+e*e*500}),t}(eui.Component);egret.registerClass(Fish,"Fish");var FishScene=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addStage=function(){var e=new Fish;e.x=0,e.y=0,e.swimming(),this.addChild(e),this.initBg(),this.initCannon()},i.initBg=function(){var e=new eui.Image("scenebg1_jpg");e.width=Display.winSize.width,e.height=Display.winSize.height,this.addChild(e)},i.initCannon=function(){},t}(eui.Component);egret.registerClass(FishScene,"FishScene");var EllipseShapData=function(){function e(){this.ra=0,this.rb=0}var t=(__define,e);t.prototype;return e}();egret.registerClass(EllipseShapData,"EllipseShapData");var PolygonShapData=function(){function e(){this.pointArray=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(PolygonShapData,"PolygonShapData");var PolyLineShapData=function(){function e(){this.pointArray=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(PolyLineShapData,"PolyLineShapData");var RectangleShapData=function(){function e(){this.width=0,this.height=0}var t=(__define,e);t.prototype;return e}();egret.registerClass(RectangleShapData,"RectangleShapData");var TiledScene=function(e){function t(){e.call(this),this.map=null,this.prePoint={x:0,y:0},this.initBg(),this.onLoadMap(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegan,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMoved,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addToStage=function(){},i.initBg=function(){var e=new egret.Shape;e.graphics.beginFill(12700671),e.graphics.drawRect(0,0,Display.winSize.width,Display.winSize.height),e.graphics.endFill(),this.addChild(e)},i.onLoadMap=function(){var e="resource/tiled/map.tmx",t=new egret.URLLoader;t.dataFormat=egret.URLLoaderDataFormat.TEXT,t.addEventListener(egret.Event.COMPLETE,function(t){var n=egret.XML.parse(t.target.data);this.map=new tiled.TMXTilemap(2e3,2e3,n,e),this.map.render(),this.map.addEventListener(tiled.TMXImageLoadEvent.ALL_IMAGE_COMPLETE,this.onLoaded,this),this.addChildAt(this.map,1)},this),t.load(new egret.URLRequest(e))},i.onLoaded=function(){if(this.map){this.map.visible=!0;var e=this.map.getLayers();for(var t in e){var n=e[t],i=n.__class__;if("tiled.TMXLayer"==i){var r=n;r.getTile(0,0),r.getTileId(0,0)}else if("tiled.TMXObjectGroup"==i)for(var a=n,s=a.getObjectCount(),o=0;s>o;o++){var l=a.getObjectByIndex(o);if(l.isEllipse){var h=new EllipseShapData;h.pos=new egret.Point(l.x,l.y),h.ra=l.width,h.rb=l.height}else l.isImage||l.isPolygon||l.isPolyLine}}var c=this.map.getObjects();for(var t in c)var d=c[t],g=0}},i.onTouchBegan=function(e){this.prePoint.x=e.stageX,this.prePoint.y=e.stageY},i.onTouchEnd=function(e){},i.onTouchMoved=function(e){if(this.map){var t=e.stageX,n=e.stageY,i=t-this.prePoint.x,r=n-this.prePoint.y,a=this.map.x,s=this.map.y;this.map.x=a+i,this.map.y=s+r,this.prePoint.x=t,this.prePoint.y=n}},t}(egret.DisplayObjectContainer);egret.registerClass(TiledScene,"TiledScene");var Animation=function(){function e(){}var t=(__define,e);t.prototype;return e.makeAni=function(e){var t=RES.getRes(e+"_json"),n=RES.getRes(e+"_png");if(t&&n){var i=new egret.MovieClipDataFactory(t,n),r=new egret.MovieClip(i.generateMovieClipData("ani"));return r.frameRate=10,r}return egret.log("[Animation] �����ļ������� "+e),null},e.makeParticle=function(e){},e}();egret.registerClass(Animation,"Animation");var CallBackFunc=function(){function e(){this.callBack=null,this.thisObj=null,this.args=[]}var t=(__define,e),n=t.prototype;return n.handler=function(e,t,n){return this.callBack=e,this.thisObj=t,this.args=n,this},n.exec=function(e){return void 0===e&&(e=null),e&&(this.args=e),null!=this.callBack&&null!=this.thisObj?this.callBack.apply(this.thisObj,this.args):void 0},e}();egret.registerClass(CallBackFunc,"CallBackFunc");var Director=function(){function e(){this.stackLayer=[],this.gameLayer=null,this.netLayer=null,this.guidLayer=null}var t=(__define,e),n=t.prototype;return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},n.initWithMain=function(e){null==this.gameLayer&&(this.gameLayer=e),this.netLayer=new NetLayerUtil,Display.stage.addChildAt(this.netLayer,9),this.guidLayer=new GuidLayerUtil,Display.stage.addChildAt(this.guidLayer,10)},n.repleaceScene=function(e){null!=this.gameLayer&&null!=e&&(this.gameLayer.removeChildren(),this.gameLayer.addChild(e))},n.pushScene=function(e){null!=this.gameLayer&&null!=e&&(this.gameLayer.addChild(e),this.stackLayer.push(e))},n.popScene=function(){if(null!=this.gameLayer){var e=this.stackLayer.length;if(e>0){var t=this.stackLayer[e-1];t.parent==this.gameLayer&&(this.gameLayer.removeChild(t),Util.removeByElements(this.stackLayer,t))}}},n.addGuidLayer=function(){this.guidLayer.addGuidLayer()},n.getCurGuidLayer=function(){return this.guidLayer.curLayer},n.cleanGuidLayer=function(){this.guidLayer.cleanGuidLayer()},n.addNetWaitLayer=function(){this.netLayer.addWaitLayer()},n.addNetOutLineLayer=function(){this.netLayer.addOutLineLayer()},n.addNetErrorLayer=function(){this.netLayer.addErrorLayer()},n.cleanNetLayer=function(){this.netLayer.cleanLayer()},e.instance=null,e}();egret.registerClass(Director,"Director");var Display=function(){function e(){}var t=__define,n=e;n.prototype;return t(e,"winSize",function(){return this._winSize.width=egret.MainContext.instance.stage.stageWidth,this._winSize.height=egret.MainContext.instance.stage.stageHeight,this._winSize.cx=this._winSize.width/2,this._winSize.cy=this._winSize.height/2,this._winSize}),t(e,"stage",function(){return egret.MainContext.instance.stage}),e._winSize={width:0,height:0,cx:0,cy:0},e}();egret.registerClass(Display,"Display");var GuidLayerUtil=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addGuidLayer=function(){},i.cleanGuidLayer=function(){this.removeChildren()},t}(egret.DisplayObjectContainer);egret.registerClass(GuidLayerUtil,"GuidLayerUtil");var NetLayerUtil=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addWaitLayer=function(){this.removeChildren();var e=new NetWait;this.curLayer=e,this.addChild(e)},i.addOutLineLayer=function(){this.removeChildren();var e=new NetError("���˺����������ط���¼,�Ƿ����µ�¼?");this.curLayer=e,this.addChild(e)},i.addErrorLayer=function(){this.removeChildren();var e=new NetError;this.curLayer=e,this.addChild(e)},i.cleanLayer=function(){this.removeChildren()},t}(egret.DisplayObjectContainer);egret.registerClass(NetLayerUtil,"NetLayerUtil");var Tips=function(e){function t(){e.call(this),this.bg=new eui.Image,this.bg.source=RES.getRes("tips_png"),this.bg.scale9Grid=new egret.Rectangle(55,12,9,4),this.addChild(this.bg),this.width=121,this.height=30,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.label=new eui.Label,this.addChild(this.label),this.x=Display.winSize.width/2,this.y=Display.winSize.height-100,egret.MainContext.instance.stage.addChildAt(this,1e5)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.show=function(e){this.label.text=e,this.label.anchorOffsetX=this.label.width/2,this.label.anchorOffsetY=this.label.height/2,this.label.x=this.width/2,this.label.y=this.height/2,this.bg.width=this.label.width+50,this.bg.height=this.label.height+20,this.bg.anchorOffsetX=this.bg.width/2,this.bg.anchorOffsetY=this.bg.height/2,this.bg.x=this.width/2,this.bg.y=this.height/2;var t=egret.Tween.get(this);t.to({x:Display.winSize.width/2,y:Display.winSize.height-200},1500,egret.Ease.backOut).call(this.callback,this)},i.callback=function(){this.parent.removeChild(this)},t}(egret.DisplayObjectContainer);egret.registerClass(Tips,"Tips");var Util=function(){function e(){}var t=(__define,e);t.prototype;return e.removeByElements=function(e,t){for(var n=-1,i=e.length,r=0;i>r;r++)if(e[r]==t){n=r;break}n>=0&&e.splice(n,1)},e.formatString=function(e){for(var t,n,i,r,a,s=0,o=e[s++],l=[],h="";o;){if(n=/^[^\x25]+/.exec(o))l.push(n[0]);else if(n=/^\x25{2}/.exec(o))l.push("%");else{if(!(n=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(o)))throw"Huh ?!";if(null==(t=e[n[1]||s++])||void 0==t)throw"Too few arguments.";if(/[^s]/.test(n[7])&&"number"!=typeof t)throw"Expecting number but found "+typeof t;switch(n[7]){case"b":t=t.toString(2);break;case"c":t=String.fromCharCode(t);break;case"d":t=parseInt(t);break;case"e":t=n[6]?t.toExponential(n[6]):t.toExponential();break;case"f":t=n[6]?parseFloat(t).toFixed(n[6]):parseFloat(t);break;case"o":t=t.toString(8);break;case"s":t=(t=String(t))&&n[6]?t.substring(0,n[6]):t;break;case"u":t=Math.abs(t);break;case"x":t=t.toString(16);break;case"X":t=t.toString(16).toUpperCase()}t=/[def]/.test(n[7])&&n[2]&&t>=0?"+"+t:t,r=n[3]?"0"==n[3]?"0":n[3].charAt(1):" ",a=n[5]-String(t).length-h.length,i=n[5]?this.str_repeat(r,a):"",l.push(h+(n[4]?t+i:i+t))}o=o.substring(n[0].length)}return l.join("")},e.str_repeat=function(e,t){return new Array(t+1).join(e)},e}();egret.registerClass(Util,"Util");